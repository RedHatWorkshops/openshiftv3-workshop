In this lab you will learn to create a new project and create an application from an existing docker image.

**Step 1: Add a new project from command line** 

**Note:** Please replace UserName with the username assigned to you in the commands below.

```
$ oc new-project mycliproject-UserName --description="My CLI Project" --display-name="CLI Project"
```
Upon project creation, OpenShift will automatically switch to the newly created project/namespace. If you wish to view the list of projects, run the following command:

````
$ oc get projects
````
If you have more than one project, you can switch to a different one by issuing `oc project <project name>`. Although you don't want to do it now.

You can also check the status of the project by running the following command. It says that the project is currently not running anything.

```
$ oc status
In project CLI Project (mycliproject-UserName)

You have no Services, DeploymentConfigs, or BuildConfigs. 'oc new-app' can be used to create applications from scratch from existing Docker images and templates.
```

**Step 2: Create an application from a Docker Image**

Next we will create an application inside the above project using an existing docker image. We will be using a very simple docker image on dockerhub that just says "Welcome to OpenShift V3". Let us just use that for this exercise.

First create a new application using the dockerimage using the `oc new-app` command as shown below:

```
$ oc new-app veermuchandi/welcome
imagestreams/welcome
deploymentconfigs/welcome
services/welcome
Service "welcome" created at 172.30.0.95 with port mappings 80.
```
The above command uses the docker image to deploy a docker container in a pod. If you quickly run `oc get pods` you will notice that a deployer pod runs and it starts an application pod as shown below. 

```
$ oc get pods
NAME              READY     REASON    RESTARTS   AGE
welcome-1-as1wk   0/1       Pending   0          1s
welcome-1-deploy  0/1       Running   0          7s
```
In the above example `welcome-1-deploy` is the deployer pod and the other one is the actual application pod. In a little while the deployer pod will succeed and the application pod will change for `Pending` to `Running` status.

```
$ oc get pods
NAME              READY     REASON    RESTARTS   AGE
welcome-1-as1wk   1/1       Running   0          2m
```

**Step 3: Add a Route for your application**

OpenShift also spins up a service for this application. Run the following command to view the list of services in the project.

````
$ $ oc get services
NAME      CLUSTER_IP       EXTERNAL_IP   PORT(S)   SELECTOR                               AGE
welcome   172.30.****216   <none>        80/TCP    app=welcome,deploymentconfig=welcome   1m
````

You will notice the `welcome` service was created for this project.

However, there is no route for this application yet. So you cannot access this application from outside yet.

Now add a route to the service with the following command. `oc expose` command will allow you to expose your service to the world so that you can access it from the browser. 

**Note**: I am using a domain name of `apps.osecloud.com`. Ask the instructor on the domain name suffix for your setup an change it. 

````
$ oc expose service welcome --name=welcome --hostname=welcome.UserName.apps.osecloud.com
NAME      HOST/PORT                     PATH      SERVICE   LABELS
welcome   welcome.UserName.apps.osecloud.com             welcome   
````

**Step 4: Try your application**

Access the application: Now access the application using curl or from the browser and see the result

````
$ curl http://welcome.UserName.apps.osecloud.com
Welcome to OpenShift Enterprise v3.0!!
````

Voila!! you created your first application using an existing docker image on OpenShift. 

**Step 4: Clean up**

Run the `oc get all` command to view all the components that were created in your project.

````
$ oc get all
NAME      TYPE      SOURCE
NAME      TYPE      STATUS    POD
NAME      DOCKER REPO            TAGS      UPDATED
welcome   veermuchandi/welcome   latest    5 hours ago
NAME      TRIGGERS                    LATEST VERSION
welcome   ConfigChange, ImageChange   1
CONTROLLER   CONTAINER(S)   IMAGE(S)                      SELECTOR                                        REPLICAS
welcome-1    welcome        veermuchandi/welcome:latest   deployment=welcome-1,deploymentconfig=welcome   1
NAME      HOST/PORT                     PATH      SERVICE   LABELS
welcome   welcome.apps.osecloud.com             welcome   
NAME      LABELS    SELECTOR                   IP(S)           PORT(S)
welcome   <none>    deploymentconfig=welcome   172.30.155.37   80/TCP
NAME              READY     REASON    RESTARTS   AGE
welcome-1-8d7nk   1/1       Running   0          4h
````

Now you can delete all these components by running one command.

````
$ oc delete all --all
imagestreams/welcome
deploymentconfigs/welcome
routes/welcome
services/welcome
````
You will notice that it has deleted the imagestream for the application, the deploymentconfig, the service and the route.
 
You can run `oc get all` again to make sure the project is empty.

Congratulations!! You now know how to create a project, an application using an external docker image and navigate around. Get ready for more fun stuff!
